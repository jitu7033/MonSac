<%- include('./partials/header') %>

<div class="w-full min-h-screen flex flex-col md:flex-row px-4 md:px-20 py-8 md:py-20">
  <!-- Sidebar -->
  <aside class="md:w-[25%] flex flex-col md:h-screen md:sticky md:top-20 md:items-start mb-8 md:mb-0">
    <div class="flex items-center gap-2 mb-6">
      <h3>sort by</h3>
      <form action="/shop">
        <select class="border border-gray-300 rounded px-2 py-1" name="sortby" id="">
          <option value="popular">Popular</option>
          <option value="newest">Newest</option>
        </select>
      </form>
    </div>

    <!-- Desktop: Separate navigation sections -->
    <nav class="hidden md:flex flex-col gap-2 mb-12">
      <a class="block w-fit hover:underline" href="">New Collection</a>
      <a class="block w-fit hover:underline" href="">All Products</a>
      <a class="block w-fit hover:underline" href="">Discounted Products</a>
    </nav>

    <nav class="hidden md:flex flex-col gap-2 mt-auto">
      <span class="block w-fit font-semibold mb-2">Filter by :</span>
      <a class="block w-fit hover:underline" href="">Availability</a>
      <a class="block w-fit hover:underline" href="">Discount</a>
    </nav>

    <!-- Mobile: Single collapsible Filter section -->
    <details class="md:hidden border border-gray-300 rounded p-3">
      <summary class="cursor-pointer font-semibold mb-2">Filter</summary>
      <nav class="flex flex-col gap-2 mt-2">
        <a class="block w-fit hover:underline" href="">New Collection</a>
        <a class="block w-fit hover:underline" href="">All Products</a>
        <a class="block w-fit hover:underline" href="">Discounted Products</a>
        <span class="block w-fit font-semibold mt-4 mb-1">Filter by :</span>
        <a class="block w-fit hover:underline" href="">Availability</a>
        <a class="block w-fit hover:underline" href="">Discount</a>
      </nav>
    </details>
  </aside>

  <!-- Products -->
  <main class="md:w-[75%] flex flex-wrap gap-6 justify-center md:justify-start">
    <% products.forEach(function(product){ %>
      <div class="w-60 flex flex-col shadow rounded overflow-hidden">
        <div class="w-full h-52 flex items-center justify-center" style="background-color:<%= product.bgcolor %>;">
          <img class="h-[12rem] object-contain" src="data:image/jpeg;base64,<%= product.image.toString('base64') %>" alt="<%= product.name %>" />
        </div>
        <div class="flex justify-between items-center px-4 py-4" style="background-color:<%= product.panelcolor %>; color:<%= product.textcolor %>;">
          <div>
            <h3 class="font-semibold"><%= product.name %></h3>
            <h4>â‚¹ <%= product.price %></h4>
          </div>
          <a class="w-7 h-7 flex items-center justify-center rounded-full bg-white text-black hover:bg-gray-200 transition" href="/addtocart/<%= product._id %>">
            <i class="ri-add-line"></i>
          </a>
        </div>
      </div>
    <% }) %>
  </main>
</div>

<%- include('./partials/footer') %>
